{"name":"Encoder/Decoder Arabic-Context v1 (single-file HTML)","type":"code/html","content":"<!DOCTYPE html>\n<html lang="ar" dir="rtl">\n<head>\n  <meta charset="UTF-8" />\n  <meta name="viewport" content="width=device-width, initial-scale=1" />\n  <title>ØªÙˆÙ„ÙŠØ¯ Ø±Ù…ÙˆØ² Ø®ÙÙŠØ© â€” ØªØ´ÙÙŠØ± ÙˆÙÙƒ ØªØ´ÙÙŠØ± Ø³ÙŠØ§Ù‚ÙŠ</title>\n  <style>\n    :root{\n      --bg:#0b0f14;--panel:#121821;--muted:#93a2b1;--text:#e6edf3;--accent:#5eead4;--accent-2:#8b5cf6;--danger:#ef4444;--ok:#22c55e;\n      --radius:18px;--shadow:0 10px 30px rgba(0,0,0,.35);\n    }\n    *{box-sizing:border-box}\n    html,body{height:100%}\n    body{margin:0;font-family:"Cairo", system-ui, -apple-system, Segoe UI, Roboto, Noto Sans Arabic, Arial, sans-serif;background:linear-gradient(135deg,#0b0f14 0%,#0e1320 50%,#0b0f14 100%);color:var(--text)}\n    .container{max-width:1080px;margin:32px auto;padding:0 16px}\n    .title{font-size:28px;display:flex;align-items:center;gap:10px;margin:0 0 6px}\n    .subtitle{margin:0 0 24px;color:var(--muted)}\n    .grid{display:grid;grid-template-columns:1fr;gap:16px}\n    @media(min-width:880px){.grid{grid-template-columns:1fr 1fr}}\n    .card{background:radial-gradient(1200px 400px at 100% -10%,rgba(94,234,212,.08),transparent 60%),radial-gradient(1000px 400px at -10% 110%,rgba(139,92,246,.08),transparent 60%),var(--panel);border:1px solid rgba(255,255,255,.06);border-radius:var(--radius);box-shadow:var(--shadow);padding:16px}\n    .row{display:flex;gap:8px;align-items:center;flex-wrap:wrap}\n    textarea{width:100%;min-height:170px;background:#0b111a;color:var(--text);border:1px solid rgba(255,255,255,.08);border-radius:14px;padding:12px 14px;font-size:15px;line-height:1.6;outline:none;transition:.2s}\n    textarea:focus{border-color:rgba(94,234,212,.45);box-shadow:0 0 0 3px rgba(94,234,212,.15)}\n    .btn{appearance:none;border:none;border-radius:14px;padding:10px 14px;font-size:15px;background:#0f1623;color:var(--text);cursor:pointer;transition:.15s;border:1px solid rgba(255,255,255,.06)}\n    .btn:hover{transform:translateY(-1px);filter:brightness(1.1)}\n    .btn.primary{background:linear-gradient(135deg,var(--accent),#22d3ee);color:#061014}\n    .btn.secondary{background:linear-gradient(135deg,#a78bfa,#60a5fa);color:#0d1020}\n    .btn.ghost{background:transparent}\n    .badge{display:inline-flex;gap:8px;align-items:center;background:rgba(94,234,212,.12);color:var(--accent);border:1px solid rgba(94,234,212,.35);padding:6px 10px;border-radius:999px;font-size:13px}\n    .hint{font-size:13px;color:var(--muted)}\n    .mini{font-size:12px;color:var(--muted)}\n    .split{display:grid;grid-template-columns:1fr 1fr;gap:8px}\n    .kbd{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;background:#0a0f17;border:1px solid rgba(255,255,255,.08);padding:2px 8px;border-radius:8px}\n    .pill{border-radius:999px;padding:2px 10px;border:1px dashed rgba(255,255,255,.15)}\n    .ok{color:var(--ok)}.danger{color:var(--danger)}\n  </style>\n  <link rel="preconnect" href="https://fonts.googleapis.com">\n  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>\n  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">\n</head>\n<body>\n  <div class="container">\n    <div class="row" style="justify-content:space-between;margin-bottom:8px">\n      <h1 class="title">ğŸ” ØªÙˆÙ„ÙŠØ¯ Ø±Ù…ÙˆØ² Ø®ÙÙŠØ© <span class="badge">ØªØ´ÙÙŠØ± Ø³ÙŠØ§Ù‚ÙŠ + ÙÙƒ Ø§Ù„ØªØ´ÙÙŠØ±</span></h1>\n      <div class="pill mini">ÙŠØ¹Ù…Ù„ 100% Ø¨Ø¯ÙˆÙ† Ø¥Ù†ØªØ±Ù†Øª â€” Ù…Ù„Ù ÙˆØ§Ø­Ø¯ ÙÙ‚Ø·</div>\n    </div>\n    <p class="subtitle">Ø§ÙƒØªØ¨ <b>Ø§Ø³Ù…</b> Ø£Ùˆ <b>ØªØ§Ø±ÙŠØ® Ù…ÙŠÙ„Ø§Ø¯</b> ÙˆØ³ÙŠØªÙ… ØªØ­ÙˆÙŠÙ„Ù‡ Ù„Ø±Ù…ÙˆØ² ØºØ§Ù…Ø¶Ø©. Ø§Ù„Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ© <b>Ø³ÙŠØ§Ù‚ÙŠØ©</b>: Ø§Ù„Ø±Ù…Ø² Ù‚Ø¯ ÙŠØªØºÙŠÙ‘Ø± Ø­Ø³Ø¨ Ø§Ù„Ø­Ø±Ù/Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø§Ø¨Ù‚ (Ù…Ø«Ø§Ù„: <span class="kbd">19</span> ÙŠØ¹Ø·ÙŠ Ø±Ù…Ø²Ù‹Ø§ Ø®Ø§ØµÙ‹Ø§ Ù„Ù€ <b>9</b>ØŒ Ùˆ<span class="kbd">Ù‡Ø²</span> ÙŠØ¹Ø·ÙŠ Ø±Ù…Ø²Ù‹Ø§ Ø®Ø§ØµÙ‹Ø§ Ù„Ù€ <b>Ø²</b>). ÙˆÙŠÙ…ÙƒÙ† ÙÙƒÙ‡Ø§ Ø¨Ø³Ù‡ÙˆÙ„Ø© Ø¨Ù†ÙØ³ Ø§Ù„ØµÙØ­Ø©.</p>\n\n    <div class="grid">\n      <section class="card">\n        <h3 style="margin-top:0">ğŸ”„ Ø§Ù„ØªØ´ÙÙŠØ± â†’ Ù…Ù† Ù†Øµ Ø¥Ù„Ù‰ Ø±Ù…ÙˆØ²</h3>\n        <textarea id="plain" placeholder="Ù…Ø«Ø§Ù„: Ø£Ù†Ø³ 2008-12-31 Ø£Ùˆ Ù‡Ø² Ø£Ùˆ 19"></textarea>\n        <div class="row" style="margin-top:10px">\n          <button class="btn primary" id="encodeBtn">ØªØ´ÙÙŠØ± (Encode)</button>\n          <button class="btn" id="copyCipher">Ù†Ø³Ø® Ø§Ù„Ø±Ù…ÙˆØ²</button>\n          <span class="hint">Ø§Ù„Ù†Ø§ØªØ¬ ÙŠÙƒÙˆÙ† Ø¹Ø¨Ø§Ø±Ø© Ø¹Ù† <b>Ø±Ù…ÙˆØ² Ù…ÙØµÙˆÙ„Ø© Ø¨Ù…Ø³Ø§ÙØ©</b> Ù„Ø³Ù‡ÙˆÙ„Ø© ÙÙƒÙ‘Ù‡Ø§.</span>\n        </div>\n        <textarea id="cipher" placeholder="Ø§Ù„Ø±Ù…ÙˆØ² ØªØ¸Ù‡Ø± Ù‡Ù†Ø§ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ Ø¨Ø¹Ø¯ Ø§Ù„ØªØ´ÙÙŠØ±"></textarea>\n      </section>\n\n      <section class="card">\n        <h3 style="margin-top:0">ğŸ—ï¸ ÙÙƒ Ø§Ù„ØªØ´ÙÙŠØ± â†’ Ù…Ù† Ø±Ù…ÙˆØ² Ø¥Ù„Ù‰ Ù†Øµ</h3>\n        <textarea id="cipherIn" placeholder="Ø§Ù„ØµÙ‚ Ø§Ù„Ø±Ù…ÙˆØ² (Ù…ÙØµÙˆÙ„Ø© Ø¨Ù…Ø³Ø§ÙØ§Øª)"></textarea>\n        <div class="row" style="margin-top:10px">\n          <button class="btn secondary" id="decodeBtn">ÙÙƒ Ø§Ù„ØªØ´ÙÙŠØ± (Decode)</button>\n          <button class="btn" id="copyPlain">Ù†Ø³Ø® Ø§Ù„Ù†Øµ</button>\n          <span class="hint">ØªØ³ØªØ·ÙŠØ¹ Ø¥Ø±Ø¬Ø§Ø¹ Ø§Ù„Ù†Øµ Ø§Ù„Ø£ØµÙ„ÙŠ Ø­ØªÙ‰ Ù…Ø¹ Ø§Ù„Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø³ÙŠØ§Ù‚ÙŠØ© (Ù…Ø«Ù„ 19 Ùˆ Ù‡Ø²).</span>\n        </div>\n        <textarea id="plainOut" placeholder="Ø§Ù„Ù†Øµ Ø§Ù„Ø£ØµÙ„ÙŠ ÙŠØ¸Ù‡Ø± Ù‡Ù†Ø§ Ø¨Ø¹Ø¯ ÙÙƒ Ø§Ù„ØªØ´ÙÙŠØ±"></textarea>\n      </section>\n    </div>\n\n    <section class="card" style="margin-top:16px">\n      <h3 style="margin-top:0">âš™ï¸ ØªØ®ØµÙŠØµ Ø§Ù„Ø£Ø²ÙˆØ§Ø¬ Ø§Ù„Ø³ÙŠØ§Ù‚ÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</h3>\n      <div class="row">\n        <input id="pairPrev" class="btn ghost" maxlength="2" placeholder="Ø§Ù„Ø­Ø±Ù/Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø§Ø¨Ù‚" style="width:180px" />\n        <input id="pairCurr" class="btn ghost" maxlength="2" placeholder="Ø§Ù„Ø­Ø±Ù/Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ" style="width:180px" />\n        <button class="btn" id="addPair">Ø¥Ø¶Ø§ÙØ© Ø²ÙˆØ¬ Ù…Ø®ØµÙ‘Øµ</button>\n        <span class="hint">ÙƒÙ„ Ø²ÙˆØ¬ ÙŠØ£Ø®Ø° Ø±Ù…Ø²Ù‹Ø§ Ø®Ø§ØµÙ‹Ø§ Ø¨Ù‡ ÙˆÙŠÙØ­ÙØ¸ Ù…Ø­Ù„ÙŠÙ‹Ø§.</span>\n      </div>\n      <div id="pairsList" class="mini" style="margin-top:10px;color:#cbd5e1"></div>\n    </section>\n\n    <p class="mini" style="text-align:center;margin-top:12px;color:#9aa6b2">Ù…Ù„Ø§Ø­Ø¸Ø©: Ø§Ù„Ø±Ù…ÙˆØ² Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø© Ø«Ø§Ø¨ØªØ© Ø¯Ø§Ø®Ù„ÙŠÙ‹Ø§ Ù„Ø¶Ù…Ø§Ù† Ø¥Ù…ÙƒØ§Ù†ÙŠØ© ÙÙƒ Ø§Ù„ØªØ´ÙÙŠØ±. ÙŠÙ…ÙƒÙ†Ùƒ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ù„Ù ÙˆØªØºÙŠÙŠØ± Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª ÙƒÙ…Ø§ ØªØ±ÙŠØ¯.</p>\n  </div>\n\n  <script>\n    // ====== Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø­Ø±ÙˆÙ ÙˆØ§Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„Ù…Ø³Ù…ÙˆØ­Ø© ======\n    const ARABIC_LETTERS = [\n      "Ø§","Ø¨","Øª","Ø«","Ø¬","Ø­","Ø®","Ø¯","Ø°","Ø±","Ø²","Ø³","Ø´","Øµ","Ø¶","Ø·","Ø¸","Ø¹","Øº","Ù","Ù‚","Ùƒ","Ù„","Ù…","Ù†","Ù‡","Ùˆ","ÙŠ","Ø¡","Ø£","Ø¥","Ø¢","Ù‰","Ø©","Ø¤","Ø¦"\n    ];\n    const DIGITS_AR = ["Ù ","Ù¡","Ù¢","Ù£","Ù¤","Ù¥","Ù¦","Ù§","Ù¨","Ù©"]; // Ø£Ø±Ù‚Ø§Ù… Ø¹Ø±Ø¨ÙŠØ©\n    const DIGITS_EN = ["0","1","2","3","4","5","6","7","8","9"]; // Ø£Ø±Ù‚Ø§Ù… Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©\n    const COMMON = [" ","-","/",".",":",",","Ø›","?","!","(",")"];\n\n    // ====== Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Ø§Ù„Ø±Ù…ÙˆØ²: Ø£Ø³Ø§Ø³ÙŠØ© ÙˆØ²ÙˆØ¬ÙŠØ© (Ø³ÙŠØ§Ù‚ÙŠØ©) ======\n    // ÙŠØ¬Ø¨ Ø£Ù„Ø§ ØªØªØ¯Ø§Ø®Ù„ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ØªØ§Ù† Ù„Ø¶Ù…Ø§Ù† ÙÙƒ Ø§Ù„ØªØ´ÙÙŠØ±.\n    const BASE_SYMBOLS = [\n      "â—†","â—‡","â—‹","â—","â–²","â–³","â–£","â–¢","â– ","â–¡","â—ˆ","âœ¦","âœ§","âœª","âœ«","âœ¬","âœ­","âœ®","âœ¯","âœ°",\n      "âœ±","âœ²","âœ³","âœ´","â‡","âœº","âœ»","âœ¼","âœ½","âœ¾","âœ¿","â€","â","â‚","âƒ","â„","â†","â‡","âˆ","â‰",\n      "âŠ","â‹","â˜€","â˜","â˜‚","â˜ƒ","â˜„","â˜…","â˜†","â˜","â˜˜","â˜½","â˜¾","â™ ","â™¡","â™¢","â™£","â™¤","â™¥","â™¦","â™§",\n      "âš‘","âš","âš™","âš¡","â˜¯","â˜®","â˜ª","â˜£","â˜¢","â˜¸","â™¨","âŒ","âŒ˜","âˆ","âŒ‚","âŒ","âŸ","âŒ¬","â£","â¥","âŠ","â‹"\n    ];\n\n    // Ø±Ù…ÙˆØ² Ù„Ù„Ø£Ø²ÙˆØ§Ø¬ Ø§Ù„Ø³ÙŠØ§Ù‚ÙŠØ©ØŒ Ø³Ù†Ù„ÙÙ‡Ø§ Ø¨ÙŠÙ† Ù‚ÙˆØ³ÙŠÙ† Ø®Ø§ØµÙŠÙ† Ù„ØªÙ…ÙŠÙŠØ²Ù‡Ø§: âŸ¦ ... âŸ§\n    const PAIR_INNER_SYMBOLS = [\n      "â–","âœœ","âœš","âœ›","âœ ","âœ£","âœ¤","âœ¥","âœµ","âœ¶","âœ·","âœ¸","âœ¹","âœº","âœ½","âœ¾","âœ¿","â€","â","â‚",\n      "âƒ","â„","â†","â‡","âˆ","â‰","âŠ","â‹","âœ¢","âœ£","âœ¤","âœ¥","âœ¦","âœ§","âœ©","âœª","âœ«","âœ¬","âœ­","âœ®",\n      "âœ¯","âœ°","âœ±","âœ²","âœ³","âœ´","âœµ","âœ¶","âœ·","âœ¸","âœ¹","âœº","âœ»","âœ¼","âœ½"\n    ];\n\n    // ====== Ø¨Ù†Ø§Ø¡ Ø§Ù„Ø®Ø±Ø§Ø¦Ø· Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ ======\n    const ALLOWED_CHARS = [...ARABIC_LETTERS, ...DIGITS_AR, ...DIGITS_EN, ...COMMON];\n\n    if (BASE_SYMBOLS.length < ALLOWED_CHARS.length) {\n      alert("Ø¹Ø¯Ø¯ BASE_SYMBOLS ØºÙŠØ± ÙƒØ§ÙÙ â€” Ø£Ø¶Ù Ø§Ù„Ù…Ø²ÙŠØ¯ Ù„Ø¶Ù…Ø§Ù† ØªØºØ·ÙŠØ© ÙƒÙ„ Ø§Ù„Ø£Ø­Ø±Ù.");\n    }\n\n    /**\n     * Ø³Ù†Ù†Ø´Ø¦ Ø®Ø±ÙŠØ·Ø© Ø£Ø³Ø§Ø³ÙŠØ© Ø­Ø±Ùâ†’Ø±Ù…Ø² ÙˆØ®Ø±ÙŠØ·Ø© Ø¹ÙƒØ³ÙŠØ© Ø±Ù…Ø²â†’Ø­Ø±Ù\n     */\n    const baseMap = new Map();\n    const baseReverse = new Map();\n    for (let i=0;i<ALLOWED_CHARS.length;i++){\n      const ch = ALLOWED_CHARS[i];\n      const sym = BASE_SYMBOLS[i % BASE_SYMBOLS.length];\n      baseMap.set(ch, sym);\n      baseReverse.set(sym, ch);\n    }\n\n    // ====== Ø§Ù„Ø£Ø²ÙˆØ§Ø¬ Ø§Ù„Ø³ÙŠØ§Ù‚ÙŠØ© (Overrides) ======\n    // Ø§Ù„ÙÙƒØ±Ø©: Ø¹Ù†Ø¯ ÙˆØ¬ÙˆØ¯ Ø²ÙˆØ¬ (Ø³Ø§Ø¨Ù‚+Ø­Ø§Ù„ÙŠ) Ù†Ø¶Ø¹ Ù„Ù„Ø«Ø§Ù†ÙŠ Ø±Ù…Ø²Ù‹Ø§ Ø®Ø§ØµÙ‹Ø§: âŸ¦XâŸ§ Ø­ÙŠØ« X Ù…Ù† PAIR_INNER_SYMBOLSØŒ ÙˆÙ†Ø­Ø§ÙØ¸ Ø¹Ù„Ù‰ Ø±Ù…Ø² Ø§Ù„Ø³Ø§Ø¨Ù‚ ÙƒÙ…Ø§ Ù‡Ùˆ.\n    // Ø£Ù…Ø«Ù„Ø© Ù…Ø·Ù„ÙˆØ¨Ø©: "19" Ùˆ "Ù‡Ø²"\n    const defaultPairs = [\n      ["1","9"], // 19 â†’ Ù„Ù„Ù€ 9 Ø±Ù…Ø² Ø®Ø§Øµ\n      ["Ù‡","Ø²"], // Ù‡Ø² â†’ Ù„Ù„Ù€ Ø² Ø±Ù…Ø² Ø®Ø§Øµ\n    ];\n\n    function wrapPairSymbol(inner){ return âŸ¦${inner}âŸ§; }\n\n    const pairMap = new Map();      // key: prev+curr â†’ token\n    const pairReverse = new Map();  // key: token â†’ prev+curr\n\n    // ØªØ­Ù…ÙŠÙ„ Ù…Ù† localStorage Ø¥Ø°Ø§ Ù…ÙˆØ¬ÙˆØ¯\n    const saved = JSON.parse(localStorage.getItem("ctxPairs")||"null");\n    let pairs = saved?.pairs || defaultPairs;\n\n    function rebuildPairs(){\n      pairMap.clear();\n      pairReverse.clear();\n      const used = new Set();\n      let idx = 0;\n      for(const [p,c] of pairs){\n        const k = p+"|"+c;\n        let inner;\n        // Ø§Ø®ØªØ± Ø±Ù…Ø²Ù‹Ø§ Ø¯Ø§Ø®Ù„ÙŠÙ‹Ø§ ØºÙŠØ± Ù…Ø³ØªØ®Ø¯Ù…\n        while(idx < PAIR_INNER_SYMBOLS.length && used.has(PAIR_INNER_SYMBOLS[idx])) idx++;\n        inner = PAIR_INNER_SYMBOLS[idx % PAIR_INNER_SYMBOLS.length];\n        used.add(inner);\n        const token = wrapPairSymbol(inner);\n        pairMap.set(k, token);\n        pairReverse.set(token, k);\n        idx++;\n      }\n      localStorage.setItem("ctxPairs", JSON.stringify({pairs}));\n      renderPairs();\n    }\n\n    function renderPairs(){\n      const box = document.getElementById('pairsList');\n      if(!pairs.length){ box.textContent = 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ø²ÙˆØ§Ø¬ Ø³ÙŠØ§Ù‚ÙŠØ© â€” Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø£Ø¹Ù„Ø§Ù‡ Ù„Ø¥Ø¶Ø§ÙØ© ÙˆØ§Ø­Ø¯.'; return; }\n      box.innerHTML = pairs.map(([p,c],i)=><span class=\"pill\">${i+1}. <b>${p}</b> Ø«Ù… <b>${c}</b> â†’ Ø±Ù…Ø² Ø®Ø§Øµ</span>).join(' ');\n    }\n\n    rebuildPairs();\n\n    // ====== Ø§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© ======\n    function encode(input){\n      const tokens = [];\n      let prev = null;\n      for(const ch of input){\n        // Ø¥Ø°Ø§ Ø§Ù„Ø­Ø±Ù ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ Ø¨Ø§Ù„Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ø³Ù†Ø­ØªÙØ¸ Ø¨Ù‡ ÙƒÙ…Ø§ Ù‡Ùˆ Ø¯Ø§Ø®Ù„ Ù‚ÙˆØ³ Ø®Ø§Øµ Ù„ÙŠØ³Ù‡Ù„ ÙÙƒÙ‘Ù‡\n        let baseToken = baseMap.get(ch);\n        if(!baseToken){ baseToken = âŸ¨${ch}âŸ©; }\n        if(prev !== null){\n          const key = prev+"|"+ch;\n          if(pairMap.has(key)){\n            // Ø£Ø¶Ù Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ø®Ø§Øµ Ù„Ù„Ø«Ø§Ù†ÙŠ\n            tokens.push(pairMap.get(key));\n          }else{\n            tokens.push(baseToken);\n          }\n        }else{\n          tokens.push(baseToken);\n        }\n        prev = ch;\n      }\n      return tokens.join(' ');\n    }\n\n    function decode(cipher){\n      const tokens = (cipher||"").trim().length ? cipher.split(/\s+/) : [];\n      let result = '';\n      let lastDecoded = null;\n      for(const t of tokens){\n        if(pairReverse.has(t)){\n          // Ù‡Ø°Ø§ ØªÙˆÙƒÙ† Ø²ÙˆØ¬ÙŠ ÙŠÙ…Ø«Ù„ Ø§Ù„Ø­Ø±Ù Ø§Ù„Ø«Ø§Ù†ÙŠ ÙÙ‚Ø·\n          const [p,c] = pairReverse.get(t).split('|');\n          // Ø§Ø®ØªÙŠØ§Ø±ÙŠ: Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªØ·Ø§Ø¨Ù‚ Ø§Ù„Ø³Ø§Ø¨Ù‚\n          if(lastDecoded && lastDecoded !== p){\n            // Ø¥Ø°Ø§ Ù„Ø§ ÙŠØ·Ø§Ø¨Ù‚ØŒ Ù†ÙØªØ±Ø¶Ù‡ Ù…Ø³ØªÙ‚Ù„Ù‹Ø§ ÙÙ‚Ø· Ø¨Ø§Ù„Ø«Ø§Ù†ÙŠ\n            result += c;\n          }else{\n            result += c;\n          }\n          lastDecoded = c;\n        }else if(t.startsWith('âŸ¨') && t.endsWith('âŸ©')){\n          // Ù…Ø­Ø§Ø±Ù ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙØ© Ø­ÙÙØ¸Øª ÙƒÙ…Ø§ Ù‡ÙŠ\n          const ch = t.slice(1,-1);\n          result += ch;\n          lastDecoded = ch;\n        }else{\n          // ØªÙˆÙƒÙ† Ø£Ø³Ø§Ø³ÙŠ\n          const ch = baseReverse.get(t);\n          if(ch){\n            result += ch;\n            lastDecoded = ch;\n          }else{\n            // Ø¥Ø°Ø§ Ù„Ù… Ù†Ø¬Ø¯ØŒ Ù†Ø¶Ø¹Ù‡ ÙƒÙ…Ø§ Ù‡Ùˆ (Ø­Ù…Ø§ÙŠØ© Ù…Ù† Ø¶ÙŠØ§Ø¹ Ø§Ù„Ø±Ù…ÙˆØ²)\n            result += t;\n            lastDecoded = t;\n          }\n        }\n      }\n      return result;\n    }\n\n    // ====== Ø±Ø¨Ø· Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© ======\n    const $ = (id)=>document.getElementById(id);\n\n    $("encodeBtn").addEventListener('click', ()=>{\n      $("cipher").value = encode($("plain").value);\n    });\n    $("decodeBtn").addEventListener('click', ()=>{\n      $("plainOut").value = decode($("cipherIn").value);\n    });\n\n    $("copyCipher").addEventListener('click', async()=>{\n      const v = $("cipher").value; if(!v) return;\n      await navigator.clipboard.writeText(v);\n      flash($("copyCipher"), 'ØªÙ… Ø§Ù„Ù†Ø³Ø® âœ…');\n    });\n\n    $("copyPlain").addEventListener('click', async()=>{\n      const v = $("plainOut").value; if(!v) return;\n      await navigator.clipboard.writeText(v);\n      flash($("copyPlain"), 'ØªÙ… Ø§Ù„Ù†Ø³Ø® âœ…');\n    });\n\n    function flash(btn, text){\n      const old = btn.textContent; btn.textContent = text; btn.disabled = true;\n      setTimeout(()=>{btn.textContent = old; btn.disabled=false;}, 900);\n    }\n\n    $("addPair").addEventListener('click', ()=>{\n      const p = $("pairPrev").value?.trim();\n      const c = $("pairCurr").value?.trim();\n      if(!p || !c){ alert('Ø§Ù…Ù„Ø£ Ø§Ù„Ø­Ù‚Ù„ÙŠÙ† Ù„Ø¥Ø¶Ø§ÙØ© Ø²ÙˆØ¬ Ø³ÙŠØ§Ù‚ÙŠ'); return; }\n      pairs.push([p[0], c[0]]);\n      rebuildPairs();\n      $("pairPrev").value='';\n      $("pairCurr").value='';\n    });\n\n    // ====== Ø£Ù…Ø«Ù„Ø© Ø³Ø±ÙŠØ¹Ø© Ù„Ù„ØªØ¬Ø±Ø¨Ø© ======\n    $("plain").value = "Ø£Ù†Ø³ 19 Ù‡Ø² 2008-12-31";\n  </script>\n</body>\n</html>"}

